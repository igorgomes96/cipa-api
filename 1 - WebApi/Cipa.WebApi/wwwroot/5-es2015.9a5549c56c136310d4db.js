(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"2PHo":function(e,t,a){"use strict";a.r(t);var n=a("fXoL"),o=a("tyNb"),i=a("GrLX"),r=a("dWir"),s=a("gbzl"),l=a("iufN"),c=a("7dP1"),p=a("ofXK"),d=(a("ZELa"),a("pLZG")),m=a("nYR2"),u=a("L5lq"),h=a("KyPx"),g=a("S0jo"),f=a("cp0P"),v=a("7B0N"),b=a("3Pt+"),E=a("19Fg");function x(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"option",9),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275property"]("value",e.id),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.codigoGrupo)}}let S=(()=>{class e{constructor(e){this.gruposApi=e,this.salvandoGrupo=!1,this.selecionarGrupo=new n.EventEmitter}ngOnInit(){this.gruposApi.getAll().subscribe(e=>{this.grupos=e,this.codigoGrupo&&(this.grupoId=this.grupos.find(e=>e.codigoGrupo===this.codigoGrupo).id)})}salvar(){this.selecionarGrupo.emit(this.grupos.find(e=>e.id===+this.grupoId))}}return e.\u0275fac=function(t){return new(t||e)(n["\u0275\u0275directiveInject"](v.a))},e.\u0275cmp=n["\u0275\u0275defineComponent"]({type:e,selectors:[["app-alteracao-grupo"]],inputs:{codigoGrupo:"codigoGrupo",salvandoGrupo:"salvandoGrupo"},outputs:{selecionarGrupo:"selecionarGrupo"},decls:12,vars:3,consts:[[3,"submit"],[1,"row"],[1,"col-lg-4","col-md-6","col-sm-12"],[1,"form-group"],[1,"control-label","required"],["required","","name","grupo","id","grupo",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",3,"ladda"],[3,"value"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"form",0),n["\u0275\u0275listener"]("submit",(function(){return t.salvar()})),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275elementStart"](4,"label",4),n["\u0275\u0275text"](5,"Grupo"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"select",5),n["\u0275\u0275listener"]("ngModelChange",(function(e){return t.grupoId=e})),n["\u0275\u0275elementStart"](7,"option",6),n["\u0275\u0275text"](8,"(Selecione)"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,x,2,2,"option",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"button",8),n["\u0275\u0275text"](11,"Alterar"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](6),n["\u0275\u0275property"]("ngModel",t.grupoId),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",t.grupos),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ladda",t.salvandoGrupo))},directives:[b["\u0275angular_packages_forms_forms_y"],b.NgControlStatusGroup,b.NgForm,b.SelectControlValueAccessor,b.RequiredValidator,b.NgControlStatus,b.NgModel,b.NgSelectOption,b["\u0275angular_packages_forms_forms_x"],p.l,E.a],styles:[""]}),e})();const I=["modalAlteracaoGrupo"];function C(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",13),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.eleicao.etapaAtual.nome," ")}}function y(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",14),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"date"),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" Finalizada em ",n["\u0275\u0275pipeBind2"](2,1,e.eleicao.dataFinalizacao,"dd/MMM")," ")}}function w(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"a",17),n["\u0275\u0275listener"]("click",(function(){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"](2).alterarGrupo()})),n["\u0275\u0275element"](1,"span",18),n["\u0275\u0275elementEnd"]()}}function j(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275text"](1," Grupo: "),n["\u0275\u0275elementStart"](2,"strong",15),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,w,2,0,"a",16),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](e.eleicao.grupo),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.eleicao.dataFinalizacao)}}function O(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275element"](1,"span",5),n["\u0275\u0275text"](2," Inscri\xe7\xf5es: de "),n["\u0275\u0275elementStart"](3,"strong"),n["\u0275\u0275text"](4),n["\u0275\u0275pipe"](5,"date"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](6," a "),n["\u0275\u0275elementStart"](7,"strong"),n["\u0275\u0275text"](8),n["\u0275\u0275pipe"](9,"date"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind2"](5,2,e.eleicao.inicioInscricao,"dd/MMM")),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind2"](9,5,e.eleicao.terminoInscricao,"dd/MMM"))}}function M(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275element"](1,"br"),n["\u0275\u0275element"](2,"span",5),n["\u0275\u0275text"](3," Vota\xe7\xe3o: de "),n["\u0275\u0275elementStart"](4,"strong"),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"date"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](7," a "),n["\u0275\u0275elementStart"](8,"strong"),n["\u0275\u0275text"](9),n["\u0275\u0275pipe"](10,"date"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](5),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind2"](6,2,e.eleicao.inicioVotacao,"dd/MMM")),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind2"](10,5,e.eleicao.terminoVotacao,"dd/MMM"))}}function A(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,O,10,8,"span",10),n["\u0275\u0275template"](2,M,11,8,"span",10),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.eleicao.inscricoesFinalizadas),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.eleicao.votacaoFinalizada)}}function $(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275element"](1,"br"),n["\u0275\u0275text"](2," Seu voto foi registrado em "),n["\u0275\u0275elementStart"](3,"strong"),n["\u0275\u0275text"](4),n["\u0275\u0275pipe"](5,"date"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](6,". "),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind2"](5,1,e.eleicao.voto.horario,"dd/MMM HH:mm"))}}function V(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275element"](1,"br"),n["\u0275\u0275text"](2," Status da Inscri\xe7\xe3o: "),n["\u0275\u0275elementStart"](3,"span",21),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngClass",e.labelStatusClass),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.eleicao.candidato.statusAprovacao)}}function G(e,t){if(1&e&&n["\u0275\u0275template"](0,V,5,2,"div",10),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("ngIf",e.eleicao.candidato)}}function F(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,$,7,4,"div",19),n["\u0275\u0275template"](2,G,1,1,"ng-template",null,20,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275reference"](3),t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.eleicao.voto)("ngIfElse",e)}}function k(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"a",25),n["\u0275\u0275element"](1,"span",26),n["\u0275\u0275text"](2," Configurar"),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("routerLink","/eleicoes/"+e.eleicao.id+"/configuracao")}}function z(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",27),n["\u0275\u0275listener"]("click",(function(){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"](2).excluirEleicao()})),n["\u0275\u0275element"](1,"span",28),n["\u0275\u0275text"](2," Excluir"),n["\u0275\u0275elementEnd"]()}}function L(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275elementStart"](1,"a",22),n["\u0275\u0275element"](2,"span",5),n["\u0275\u0275text"](3," Acessar"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,k,3,1,"a",23),n["\u0275\u0275template"](5,z,3,0,"button",24),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("routerLink","/eleicoes/"+e.eleicao.id+"/cronograma"),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",!e.eleicao.dataFinalizacao),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.eleicao.etapaAtual&&!e.eleicao.dataFinalizacao)}}function N(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275elementStart"](1,"a",30),n["\u0275\u0275element"](2,"span",31),n["\u0275\u0275text"](3," Votar "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("routerLink","/eleicoes/"+e.eleicao.id+"/votacao")}}function P(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275template"](1,N,4,1,"span",10),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.eleicao.voto&&(null==e.eleicao.etapaAtual?null:e.eleicao.etapaAtual.etapaObrigatoriaId)===e.CodigoEtapaObrigatoria.Votacao)}}function D(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275elementStart"](1,"a",30),n["\u0275\u0275element"](2,"span",33),n["\u0275\u0275text"](3," Minha Inscri\xe7\xe3o "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("routerLink","/eleicoes/"+e.eleicao.id+"/inscricoes/nova")}}function _(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275elementStart"](1,"a",34),n["\u0275\u0275element"](2,"span",33),n["\u0275\u0275text"](3," Inscreva-se! "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("routerLink","/eleicoes/"+e.eleicao.id+"/inscricoes/nova")}}function q(e,t){if(1&e&&n["\u0275\u0275template"](0,_,4,1,"span",10),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275property"]("ngIf",(null==e.eleicao.etapaAtual?null:e.eleicao.etapaAtual.etapaObrigatoriaId)===e.CodigoEtapaObrigatoria.Inscricao)}}function R(e,t){if(1&e&&(n["\u0275\u0275template"](0,D,4,1,"span",19),n["\u0275\u0275template"](1,q,1,1,"ng-template",null,32,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](2),t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("ngIf",t.eleicao.candidato)("ngIfElse",e)}}function T(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275template"](1,P,2,1,"span",19),n["\u0275\u0275template"](2,R,3,2,"ng-template",null,29,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275reference"](3),t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.eleicao.inscricoesFinalizadas)("ngIfElse",e)}}function B(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"app-alteracao-grupo",35),n["\u0275\u0275listener"]("selecionarGrupo",(function(t){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().salvarGrupo(t)})),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("codigoGrupo",e.eleicao.grupo)("salvandoGrupo",e.salvandoGrupo)}}let U=(()=>{class e{constructor(e,t,a,o){this.toast=e,this.authService=t,this.modalService=a,this.eleicoesApi=o,this.excluir=new n.EventEmitter,this.StatusAprovacao=u.c,this.CodigoEtapaObrigatoria=h.a,this.salvandoGrupo=!1}ngOnInit(){this.eleicao&&!this.eleicao.dataFinalizacao&&this.eleicao.usuarioEleitor&&this.eleicaoJaPassouDasInscricoes&&Object(f.a)({candidato:this.eleicoesApi.getInscricaoUsuario(this.eleicao.id),voto:this.eleicoesApi.getVotoUsuario(this.eleicao.id)}).subscribe(e=>{this.eleicao.candidato=e.candidato,this.eleicao.voto=e.voto})}get perfilComAcesso(){return this.authService.tokenValido&&(this.authService.authInfo.perfil===l.a.SESMT||this.authService.authInfo.perfil===l.a.Administrador)}excluirEleicao(){this.toast.confirmModal("Tem certeza que deseja excluir essa elei\xe7\xe3o? Essa a\xe7\xe3o n\xe3o poder\xe1 ser desfeita","Confirma\xe7\xe3o").pipe(Object(d.a)(e=>e)).subscribe(e=>this.excluir.emit(this.eleicao))}get labelStatusClass(){if(!this.eleicao||!this.eleicao.candidato)return"";switch(this.eleicao.candidato.statusAprovacao){case u.c.Aprovada:return"label-primary";case u.c.Pendente:return"label-warning";case u.c.Reprovada:return"label-danger";default:return""}}alterarGrupo(){this.modalService.showModal(this.modalAlteracaoGrupo,"Alterar Grupo da Elei\xe7\xe3o")}salvarGrupo(e){this.salvandoGrupo=!0,this.eleicao.grupoId=e.id,this.eleicoesApi.put(this.eleicao.id,this.eleicao).pipe(Object(m.a)(()=>this.salvandoGrupo=!1)).subscribe(t=>{this.eleicao.grupoId=e.id,this.eleicao.grupo=e.codigoGrupo,this.toast.showMessage({message:"Grupo alterado com sucesso!",title:"Sucesso",type:s.a.success}),this.modalService.closeModal()})}get eleicaoJaPassouDasInscricoes(){return this.eleicao.inscricoesFinalizadas||this.eleicao.etapaAtual&&this.eleicao.etapaAtual.etapaObrigatoriaId===h.a.Inscricao}}return e.\u0275fac=function(t){return new(t||e)(n["\u0275\u0275directiveInject"](r.a),n["\u0275\u0275directiveInject"](c.a),n["\u0275\u0275directiveInject"](g.a),n["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=n["\u0275\u0275defineComponent"]({type:e,selectors:[["app-eleicao-card"]],viewQuery:function(e,t){var a;1&e&&n["\u0275\u0275viewQuery"](I,!0),2&e&&n["\u0275\u0275queryRefresh"](a=n["\u0275\u0275loadQuery"]())&&(t.modalAlteracaoGrupo=a.first)},inputs:{eleicao:"eleicao"},outputs:{excluir:"excluir"},decls:30,vars:13,consts:[[1,"ibox"],[1,"ibox-content","product-box"],[1,"product-desc"],["class","label label-success float-right",4,"ngIf"],["class","label label-primary float-right",4,"ngIf"],[1,"fa","fa-calendar"],[1,"fa","fa-map-marker"],[3,"hidden"],[1,"fa","fa-info"],[1,"fa","fa-home"],[4,"ngIf"],[1,"actions"],["modalAlteracaoGrupo",""],[1,"label","label-success","float-right"],[1,"label","label-primary","float-right"],[1,"label","label-warning"],["class","m-l-sm",3,"click",4,"ngIf"],[1,"m-l-sm",3,"click"],[1,"fa","fa-pencil"],[4,"ngIf","ngIfElse"],["naoVotou",""],[1,"label",3,"ngClass"],[1,"btn","btn-success","btn-outline","m-r-sm",3,"routerLink"],["class","btn btn-primary btn-outline m-r-sm",3,"routerLink",4,"ngIf"],["class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-outline","m-r-sm",3,"routerLink"],[1,"fa","fa-cogs"],[1,"btn","btn-outline-danger",3,"click"],[1,"fa","fa-trash"],["inscricaoNaoFinalizada",""],[1,"btn","btn-outline","btn-success","m-r-sm",3,"routerLink"],[1,"fa","fa-thumbs-up"],["naoInscrito",""],[1,"fa","fa-user"],[1,"btn","btn-outline","btn-primary","m-r-sm",3,"routerLink"],[3,"codigoGrupo","salvandoGrupo","selecionarGrupo"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"h4"),n["\u0275\u0275text"](4),n["\u0275\u0275template"](5,C,2,1,"span",3),n["\u0275\u0275template"](6,y,3,4,"span",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"p"),n["\u0275\u0275element"](8,"span",5),n["\u0275\u0275elementStart"](9,"strong"),n["\u0275\u0275text"](10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](11,"br"),n["\u0275\u0275element"](12,"span",6),n["\u0275\u0275text"](13),n["\u0275\u0275element"](14,"br"),n["\u0275\u0275elementStart"](15,"span",7),n["\u0275\u0275element"](16,"span",8),n["\u0275\u0275text"](17),n["\u0275\u0275element"](18,"br"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](19,"span",9),n["\u0275\u0275text"](20),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](21,j,5,2,"div",10),n["\u0275\u0275template"](22,A,3,2,"div",10),n["\u0275\u0275template"](23,F,4,2,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](24,"div",11),n["\u0275\u0275template"](25,L,6,3,"span",10),n["\u0275\u0275template"](26,T,4,2,"span",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](27,B,1,2,"ng-template",null,12,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275element"](29,"router-outlet")),2&e&&(n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"]("",null==t.eleicao.estabelecimento||null==t.eleicao.estabelecimento.empresa?null:t.eleicao.estabelecimento.empresa.razaoSocial," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.eleicao.etapaAtual),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.eleicao.etapaAtual&&t.eleicao.dataFinalizacao),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",t.eleicao.gestao,""),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",null==t.eleicao.estabelecimento?null:t.eleicao.estabelecimento.endereco,""),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("hidden",!(null!=t.eleicao.estabelecimento&&t.eleicao.estabelecimento.descricao)),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",null==t.eleicao.estabelecimento?null:t.eleicao.estabelecimento.descricao,""),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",null==t.eleicao.estabelecimento?null:t.eleicao.estabelecimento.cidade," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.perfilComAcesso),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.perfilComAcesso),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.eleicao.usuarioEleitor),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.perfilComAcesso),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.eleicao.usuarioEleitor))},directives:[p.m,o.h,p.k,o.f,S],pipes:[p.e],styles:[".ibox[_ngcontent-%COMP%]{height:100%;margin-bottom:0}.ibox-content[_ngcontent-%COMP%], .product-desc[_ngcontent-%COMP%]{display:flex;flex:1 0 auto;flex-direction:column}.ibox-content[_ngcontent-%COMP%]{padding-bottom:20px}.product-box[_ngcontent-%COMP%]{height:100%}.actions[_ngcontent-%COMP%]{margin-left:20px}.label[_ngcontent-%COMP%]{font-size:11px;font-weight:400}"]}),e})();function Q(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",5),n["\u0275\u0275elementStart"](1,"div",6),n["\u0275\u0275elementStart"](2,"a",7),n["\u0275\u0275text"](3,"Nova Elei\xe7\xe3o "),n["\u0275\u0275element"](4,"em",8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]())}function X(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"h4"),n["\u0275\u0275text"](1,"Elei\xe7\xf5es em Andamento"),n["\u0275\u0275elementEnd"]())}function J(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"h4"),n["\u0275\u0275text"](1,"Nenhuma elei\xe7\xe3o em andamento"),n["\u0275\u0275elementEnd"]())}function H(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"h4"),n["\u0275\u0275text"](1,"Carregando elei\xe7\xf5es..."),n["\u0275\u0275elementEnd"]())}function Z(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",9),n["\u0275\u0275elementStart"](1,"app-eleicao-card",10),n["\u0275\u0275listener"]("excluir",(function(t){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().excluir(t)})),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("eleicao",e)}}function K(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"h4"),n["\u0275\u0275text"](1,"Elei\xe7\xf5es Finalizadas"),n["\u0275\u0275elementEnd"]())}function W(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"h4"),n["\u0275\u0275text"](1,"Nenhuma elei\xe7\xe3o finalizada no hist\xf3rico"),n["\u0275\u0275elementEnd"]())}function Y(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",9),n["\u0275\u0275elementStart"](1,"a",11),n["\u0275\u0275listener"]("click",(function(){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().carregarEleicoesFinalizadas()})),n["\u0275\u0275text"](2,"Carregar elei\xe7\xf5es finalizadas."),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}}function ee(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",9),n["\u0275\u0275element"](1,"app-eleicao-card",12),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("eleicao",e)}}let te=(()=>{class e{constructor(e,t,a){this.eleicoesApi=e,this.toast=t,this.authService=a,this.Perfil=l.a}ngOnInit(){this.authInfo=this.authService.authInfo,this.carregaEleicoes()}carregaEleicoes(){this.eleicoesApi.getAll({status:"aberta"}).subscribe(e=>{this.eleicoes=e})}carregarEleicoesFinalizadas(){this.eleicoesApi.getAll({status:"finalizada"}).subscribe(e=>{this.eleicoesFinalizadas=e})}buscaEleicao(e){return this.eleicoes.find(t=>t.id===e)}excluir(e){this.eleicoesApi.delete(e.id).subscribe(e=>{this.toast.showMessage({message:"Elei\xe7\xe3o exclu\xedda com sucesso!",title:"Sucesso",type:s.a.success}),this.carregaEleicoes()})}get perfilComAcessoCriacao(){return this.authInfo&&(this.authInfo.perfil===l.a.SESMT||this.authInfo.perfil===l.a.Administrador)}}return e.\u0275fac=function(t){return new(t||e)(n["\u0275\u0275directiveInject"](i.a),n["\u0275\u0275directiveInject"](r.a),n["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=n["\u0275\u0275defineComponent"]({type:e,selectors:[["app-eleicoes-lista"]],decls:12,vars:9,consts:[["class","row m-b-md",4,"ngIf"],[4,"ngIf"],[1,"row","flex-row"],["class","col-lg-4 col-md-6 col-xs-12",4,"ngFor","ngForOf"],["class","col-lg-4 col-md-6 col-xs-12",4,"ngIf"],[1,"row","m-b-md"],[1,"col-md-12"],["routerLink","/eleicoes/nova",1,"btn","btn-primary"],[1,"fa","fa-plus"],[1,"col-lg-4","col-md-6","col-xs-12"],[3,"eleicao","excluir"],[2,"text-decoration","underline",3,"click"],[3,"eleicao"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Q,5,0,"div",0),n["\u0275\u0275template"](1,X,2,0,"h4",1),n["\u0275\u0275template"](2,J,2,0,"h4",1),n["\u0275\u0275template"](3,H,2,0,"h4",1),n["\u0275\u0275elementStart"](4,"div",2),n["\u0275\u0275template"](5,Z,2,1,"div",3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](6,"hr"),n["\u0275\u0275template"](7,K,2,0,"h4",1),n["\u0275\u0275template"](8,W,2,0,"h4",1),n["\u0275\u0275elementStart"](9,"div",2),n["\u0275\u0275template"](10,Y,3,0,"div",4),n["\u0275\u0275template"](11,ee,2,1,"div",3),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("ngIf",t.perfilComAcessoCriacao),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.eleicoes&&t.eleicoes.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.eleicoes&&!t.eleicoes.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.eleicoes),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.eleicoes),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.eleicoesFinalizadas&&t.eleicoesFinalizadas.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.eleicoesFinalizadas&&!t.eleicoesFinalizadas.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.eleicoesFinalizadas),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.eleicoesFinalizadas))},directives:[p.m,p.l,o.f,U],styles:[".widget[_ngcontent-%COMP%]{border:1px solid #ddd;height:100%}@media (max-width:400px){.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{border-bottom:1px solid #e7eaec!important;margin:0}}app-eleicao-card[_ngcontent-%COMP%]{height:100%;margin-bottom:20px}"]}),e})();var ae=a("Sy1n"),ne=a("wP9F"),oe=a("zzFV"),ie=a("vkgz"),re=a("eIep"),se=a("Onx1"),le=a("CWrn"),ce=a("UdTj"),pe=a("Xxc3"),de=a("VfTn"),me=a("IEi8");const ue=["form"];let he=(()=>{class e{constructor(e){this.toasts=e,this.statusChange=new n.EventEmitter,this.intervaloDatas=60}ngOnInit(){const e=new Date;this.gestao.dataInicio=new Date(e),this.gestao.terminoMandatoAnterior=new Date(e.setDate(e.getDate()+this.intervaloDatas)),this.formGestao.statusChanges.subscribe(e=>this.statusChange.emit("VALID"===e))}atualizaDataInicio(e){this.inicioMaximo(e)<this.gestao.dataInicio&&(this.gestao.dataInicio=this.inicioMaximo(e))}validaDataInicio(e){e>this.inicioMaximo(this.gestao.terminoMandatoAnterior)&&(this.toasts.showMessage({message:`O in\xedcio do processo deve ser no m\xednimo ${this.intervaloDatas} dias antes do t\xe9rmino do mandato anterior.`,title:"Data Inv\xe1lida!",type:s.a.error}),this.gestao.dataInicio=this.inicioMaximo(this.gestao.terminoMandatoAnterior))}inicioMaximo(e){const t=new Date(e);return new Date(t.setDate(t.getDate()-this.intervaloDatas))}}return e.\u0275fac=function(t){return new(t||e)(n["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=n["\u0275\u0275defineComponent"]({type:e,selectors:[["app-gestao-form"]],viewQuery:function(e,t){var a;1&e&&n["\u0275\u0275staticViewQuery"](ue,!0),2&e&&n["\u0275\u0275queryRefresh"](a=n["\u0275\u0275loadQuery"]())&&(t.formGestao=a.first)},inputs:{gestao:"gestao"},outputs:{statusChange:"statusChange"},decls:14,vars:5,consts:[["form","ngForm"],[1,"row"],[1,"col-md-6","col-sm-12"],["name","terminoMandatoAnterior","inputClasses","input-white","id","mandatoAnterior",3,"ngModel","control","ngModelChange","change"],["terminoMandatoAnterior","ngModel"],["ajuda","O in\xedcio do processo deve ser no m\xednimo 60 dias antes do t\xe9rmino do mandato anterior."],["required","","name","dataInicio","inputClasses","input-white","id","inicioProcesso",3,"ngModel","control","ngModelChange","change"],["dataInicio","ngModel"],["type","hidden","name","duracaoGestao",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"form",null,0),n["\u0275\u0275elementStart"](2,"div",1),n["\u0275\u0275elementStart"](3,"div",2),n["\u0275\u0275text"](4," Data de T\xe9rmino do mandato Anterior "),n["\u0275\u0275elementStart"](5,"app-datepicker",3,4),n["\u0275\u0275listener"]("ngModelChange",(function(e){return t.gestao.terminoMandatoAnterior=e}))("change",(function(e){return t.atualizaDataInicio(e)})),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"div",1),n["\u0275\u0275elementStart"](8,"div",2),n["\u0275\u0275text"](9," Data de In\xedcio do processo de Elei\xe7\xe3o "),n["\u0275\u0275element"](10,"app-ajuda-tooltip",5),n["\u0275\u0275elementStart"](11,"app-datepicker",6,7),n["\u0275\u0275listener"]("ngModelChange",(function(e){return t.gestao.dataInicio=e}))("change",(function(e){return t.validaDataInicio(e)})),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"input",8),n["\u0275\u0275listener"]("ngModelChange",(function(e){return t.gestao.duracaoGestao=e})),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275reference"](6),a=n["\u0275\u0275reference"](12);n["\u0275\u0275advance"](5),n["\u0275\u0275property"]("ngModel",t.gestao.terminoMandatoAnterior)("control",e),n["\u0275\u0275advance"](6),n["\u0275\u0275property"]("ngModel",t.gestao.dataInicio)("control",a),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",t.gestao.duracaoGestao)}},directives:[b["\u0275angular_packages_forms_forms_y"],b.NgControlStatusGroup,b.NgForm,de.a,b.NgControlStatus,b.NgModel,me.a,b.RequiredValidator,b.DefaultValueAccessor],styles:[""]}),e})();var ge=a("vcDO"),fe=a("ijvc");function ve(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"app-gestao-form",4),n["\u0275\u0275listener"]("statusChange",(function(t){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().formGestaoStatusChange(t)})),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("gestao",e.gestao)}}function be(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" Observamos que voc\xea j\xe1 possui ",e.empresas.length," empresas cadastradas. Escolha uma delas para iniciar a nova elei\xe7\xe3o, ou cadastre uma nova empresa. ")}}function Ee(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275text"](1,' Voc\xea possui somente 1 empresa cadastrada, a qual j\xe1 selecionamos pra voc\xea. Se n\xe3o for essa a empresa, clique em "Nova Empresa". '),n["\u0275\u0275elementEnd"]())}function xe(e,t){1&e&&n["\u0275\u0275text"](0,' Ainda n\xe3o h\xe1 nenhuma empresa cadastrado. Clique em "Nova Empresa". ')}function Se(e,t){if(1&e&&(n["\u0275\u0275template"](0,Ee,2,0,"span",7),n["\u0275\u0275template"](1,xe,1,0,"ng-template",null,17,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](2),t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("ngIf",1===t.empresas.length)("ngIfElse",e)}}function Ie(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"option",18),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275property"]("value",e.id),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.razaoSocial)}}function Ce(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"div",5),n["\u0275\u0275elementStart"](2,"div",6),n["\u0275\u0275template"](3,be,2,1,"span",7),n["\u0275\u0275template"](4,Se,3,2,"ng-template",null,8,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementStart"](6,"form",9),n["\u0275\u0275elementStart"](7,"div",5),n["\u0275\u0275elementStart"](8,"div",10),n["\u0275\u0275elementStart"](9,"select",11),n["\u0275\u0275elementStart"](10,"option",12),n["\u0275\u0275text"](11,"(Selecione a empresa)"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](12,Ie,2,2,"option",13),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"button",14),n["\u0275\u0275listener"]("click",(function(){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().empresaForm()})),n["\u0275\u0275element"](14,"i",15),n["\u0275\u0275text"](15," Nova Empresa"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](16,"div",6),n["\u0275\u0275elementStart"](17,"app-empresa-shared-form",16),n["\u0275\u0275listener"]("cancelarEdicao",(function(){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().cancelarEmpresa()}))("salvarEmpresa",(function(t){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().salvarEmpresa(t)})),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275reference"](5),t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("hidden",t.novaEmpresa),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.empresas.length>1)("ngIfElse",e),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("formGroup",t.formListaEmpresa),n["\u0275\u0275advance"](6),n["\u0275\u0275property"]("ngForOf",t.empresas),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("hidden",!t.novaEmpresa)}}function ye(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" A empresa selecionada possui ",e.estabelecimentos.length," estabelecimentos. Selecione um deles ou cadastre um novo estabelecimento. ")}}function we(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275text"](1,' Ainda n\xe3o h\xe1 nenhum estabelecimento cadastrado. Clique em "Novo Estabelecimento". '),n["\u0275\u0275elementEnd"]())}function je(e,t){1&e&&(n["\u0275\u0275text"](0," A empresa selecionada j\xe1 possui 1 estabelecimento cadastrado. J\xe1 selecionamos ele para voc\xea."),n["\u0275\u0275element"](1,"br"),n["\u0275\u0275text"](2," Se precisar cadastrar um novo estabelecimento, basta clicar no bot\xe3o abaixo. "))}function Oe(e,t){if(1&e&&(n["\u0275\u0275template"](0,we,2,0,"span",7),n["\u0275\u0275template"](1,je,3,0,"ng-template",null,24,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](2),t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("ngIf",!t.estabelecimentos.length)("ngIfElse",e)}}function Me(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"option",18),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275property"]("value",e.id),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.cidade+", "+e.endereco,"")}}function Ae(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",25),n["\u0275\u0275elementStart"](1,"div",26),n["\u0275\u0275elementStart"](2,"div",27),n["\u0275\u0275text"](3," Grupo: "),n["\u0275\u0275elementStart"](4,"strong"),n["\u0275\u0275text"](5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](5),n["\u0275\u0275textInterpolate"](null==e.estabelecimentoSelecionado?null:e.estabelecimentoSelecionado.grupo)}}const $e=function(e){return[e]};function Ve(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"div",5),n["\u0275\u0275elementStart"](2,"div",6),n["\u0275\u0275template"](3,ye,2,1,"div",7),n["\u0275\u0275template"](4,Oe,3,2,"ng-template",null,19,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementStart"](6,"form",9),n["\u0275\u0275elementStart"](7,"div",5),n["\u0275\u0275elementStart"](8,"div",20),n["\u0275\u0275elementStart"](9,"select",21),n["\u0275\u0275elementStart"](10,"option",12),n["\u0275\u0275text"](11,"(Selecione o estabelecimento)"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](12,Me,2,2,"option",13),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](13,Ae,6,1,"div",22),n["\u0275\u0275elementStart"](14,"button",14),n["\u0275\u0275listener"]("click",(function(){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().estabelecimentoForm()})),n["\u0275\u0275element"](15,"i",15),n["\u0275\u0275text"](16," Novo Estabelecimento"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](17,"div",6),n["\u0275\u0275elementStart"](18,"app-estabelecimento-shared-form",23),n["\u0275\u0275listener"]("cancelarEdicao",(function(){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().cancelarEstabelecimento()}))("salvarEstabelecimento",(function(t){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().salvarEstabelecimento(t)})),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275reference"](5),t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("hidden",t.novoEstabelecimento),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.estabelecimentos.length>1)("ngIfElse",e),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("formGroup",t.formListaEstabelecimentos),n["\u0275\u0275advance"](6),n["\u0275\u0275property"]("ngForOf",t.estabelecimentos),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.estabelecimentoSelecionado),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("hidden",!t.novoEstabelecimento),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("empresas",n["\u0275\u0275pureFunction1"](9,$e,t.empresaSelecionada))("estabelecimento",t.estabelecimento)}}let Ge=(()=>{class e{constructor(e,t,a,n,o,i,r,s,l){this.route=e,this.empresasApi=t,this.estabelecimentosApi=a,this.formBuilder=n,this.eleicoesApi=o,this.router=i,this.toasts=r,this.gruposApi=s,this.navigationService=l,this.steps=["Gest\xe3o","Empresa","Estabelecimento"],this.currentStepIndex=1,this.gestao={dataInicio:new Date,duracaoGestao:2},this.estabelecimentos=[],this.estabelecimento=new oe.a,this.empresas=[],this.novaEmpresa=!1,this.novoEstabelecimento=!1}ngOnInit(){this.route.data.subscribe(e=>{e.hasOwnProperty("eleicao")&&(this.eleicao=e.eleicao)}),this.empresasApi.getAll().subscribe(e=>{this.empresas=e,this.empresas.length||(this.novaEmpresa=!0),1===this.empresas.length&&this.formListaEmpresa.get("empresa").setValue(this.empresas[0].id)}),this.formListaEmpresa=this.formBuilder.group({empresa:["",b.Validators.required]}),this.formListaEmpresa.get("empresa").valueChanges.pipe(Object(ie.a)(e=>{this.estabelecimento.empresaId=e,e||(this.estabelecimentos=[])}),Object(d.a)(e=>e),Object(re.a)(e=>this.estabelecimentosApi.getAll({empresaId:e}))).subscribe(e=>{this.estabelecimentos=e,this.estabelecimentos.length?1===this.estabelecimentos.length&&this.formListaEstabelecimentos.get("estabelecimento").setValue(this.estabelecimentos[0].id):this.novoEstabelecimento=!0}),this.formListaEstabelecimentos=this.formBuilder.group({estabelecimento:["",b.Validators.required]}),this.gruposApi.getAll().subscribe(e=>{this.grupos=e})}formGestaoStatusChange(e){this.formGestaoValid=e}get validNext(){switch(this.currentStepIndex){case 1:return this.formGestaoValid;case 2:return this.formListaEmpresa.valid;case 3:return this.formListaEstabelecimentos.valid;case 4:return!0;default:return!1}}get empresaSelecionada(){return this.empresas.find(e=>e.id===+this.formListaEmpresa.get("empresa").value)}get estabelecimentoSelecionado(){const e=this.formListaEstabelecimentos.get("estabelecimento").value;if(!e)return null;const t=+e;return this.estabelecimentos.find(e=>e.id===t)}changeStep(e){this.currentStepIndex=e}empresaForm(){this.novaEmpresa=!0}salvarEmpresa(e){this.empresasApi.post(e).subscribe(e=>{this.novaEmpresa=!1,this.empresas.push(e),this.formListaEmpresa.get("empresa").setValue(e.id)})}cancelarEmpresa(){this.novaEmpresa=!1}estabelecimentoForm(){this.novoEstabelecimento=!0}salvarEstabelecimento(e){this.estabelecimentosApi.post(e).subscribe(e=>{this.novoEstabelecimento=!1,this.estabelecimentos.push(e),this.formListaEstabelecimentos.get("estabelecimento").setValue(e.id)})}cancelarEstabelecimento(){this.novoEstabelecimento=!1}salvarEleicao(){const e=Object.assign(Object.assign({},this.gestao),{gestao:this.gestao.dataInicio.getFullYear(),estabelecimentoId:this.formListaEstabelecimentos.get("estabelecimento").value,grupoId:this.estabelecimentoSelecionado.grupoId});this.eleicoesApi.post(e).subscribe(e=>{this.toasts.showMessage({message:"Elei\xe7\xe3o aberta com sucesso!",title:"Sucesso!",type:s.a.success}),this.router.navigate([`/eleicoes/${e.id}/cronograma`])})}}return e.\u0275fac=function(t){return new(t||e)(n["\u0275\u0275directiveInject"](o.a),n["\u0275\u0275directiveInject"](ne.a),n["\u0275\u0275directiveInject"](se.a),n["\u0275\u0275directiveInject"](b.FormBuilder),n["\u0275\u0275directiveInject"](i.a),n["\u0275\u0275directiveInject"](o.d),n["\u0275\u0275directiveInject"](r.a),n["\u0275\u0275directiveInject"](v.a),n["\u0275\u0275directiveInject"](le.a))},e.\u0275cmp=n["\u0275\u0275defineComponent"]({type:e,selectors:[["app-eleicao-nova"]],decls:11,vars:6,consts:[[1,"container"],["saveButtonText","Abrir Elei\xe7\xe3o!",3,"steps","validNext","changeStep","finalize"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"gestao","statusChange"],[1,"row"],[1,"col-md-12",3,"hidden"],[4,"ngIf","ngIfElse"],["empresaUnica",""],[3,"formGroup"],[1,"col-lg-4","col-md-6","col-sm-12"],["name","lista-empresa","id","lista-empresa","formControlName","empresa",1,"form-control","m-t-sm"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","m-t-md",3,"click"],[1,"fa","fa-plus"],[3,"cancelarEdicao","salvarEmpresa"],["nenhumaEmpresa",""],[3,"value"],["estabelecimentoUnico",""],[1,"col-lg-6","col-md-8","col-sm-12"],["name","lista-estabelecimento","id","lista-estabelecimento","formControlName","estabelecimento",1,"form-control","m-t-sm"],["class","row m-t-md",4,"ngIf"],[3,"empresas","estabelecimento","cancelarEdicao","salvarEstabelecimento"],["nenhumEstabelecimento",""],[1,"row","m-t-md"],[1,"col-sm-12","col-md-4","col-lg-3"],[1,"alert","alert-info"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"h2"),n["\u0275\u0275text"](2,"Abertura de Nova Elei\xe7\xe3o"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"p"),n["\u0275\u0275text"](4," Para abrir uma nova elei\xe7\xe3o, basta seguir os passos abaixo. "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"app-panel"),n["\u0275\u0275elementStart"](6,"app-wizard",1),n["\u0275\u0275listener"]("changeStep",(function(e){return t.changeStep(e)}))("finalize",(function(){return t.salvarEleicao()})),n["\u0275\u0275elementStart"](7,"div",2),n["\u0275\u0275template"](8,ve,2,1,"div",3),n["\u0275\u0275template"](9,Ce,18,6,"div",3),n["\u0275\u0275template"](10,Ve,19,11,"div",3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](6),n["\u0275\u0275property"]("steps",t.steps)("validNext",t.validNext),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitch",t.currentStepIndex),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase",1),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase",2),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase",3))},directives:[ce.a,pe.a,p.n,p.o,he,p.m,b["\u0275angular_packages_forms_forms_y"],b.NgControlStatusGroup,b.FormGroupDirective,b.SelectControlValueAccessor,b.NgControlStatus,b.FormControlName,b.NgSelectOption,b["\u0275angular_packages_forms_forms_x"],p.l,ge.a,fe.a],styles:[""]}),e})();var Fe=a("LOG3"),ke=a("KVHF"),ze=a("quSY"),Le=a("lJxs"),Ne=a("IzEk");const Pe=["modalConfiguracao"];function De(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"h5"),n["\u0275\u0275text"](1,"Habilitar envio autom\xe1tico de e-mails para:"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"input",1),n["\u0275\u0275listener"]("ngModelChange",(function(t){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().eleicao.configuracao.envioEditalConvocao=t})),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](3," Edital de Convoca\xe7\xe3o"),n["\u0275\u0275element"](4,"br"),n["\u0275\u0275elementStart"](5,"input",1),n["\u0275\u0275listener"]("ngModelChange",(function(t){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().eleicao.configuracao.envioConviteInscricao=t})),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](6," Convite para Inscri\xe7\xf5es"),n["\u0275\u0275element"](7,"br"),n["\u0275\u0275elementStart"](8,"input",1),n["\u0275\u0275listener"]("ngModelChange",(function(t){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().eleicao.configuracao.envioConviteVotacao=t})),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](9," Convite para Vota\xe7\xe3o"),n["\u0275\u0275element"](10,"br"),n["\u0275\u0275elementStart"](11,"button",2),n["\u0275\u0275listener"]("click",(function(){return n["\u0275\u0275restoreView"](e),n["\u0275\u0275nextContext"]().salvarConfiguracoes()})),n["\u0275\u0275element"](12,"span",3),n["\u0275\u0275text"](13," Salvar Configura\xe7\xf5es"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",e.eleicao.configuracao.envioEditalConvocao),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngModel",e.eleicao.configuracao.envioConviteInscricao),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngModel",e.eleicao.configuracao.envioConviteVotacao)}}let _e=(()=>{class e{constructor(e,t,a,n,o){this.modalService=e,this.router=t,this.route=a,this.eleicoesApi=n,this.toasts=o,this.subscriptions=new ze.a}ngOnInit(){this.route.data.pipe(Object(d.a)(e=>e.hasOwnProperty("eleicao")),Object(Le.a)(e=>e.eleicao),Object(Ne.a)(1)).subscribe(e=>this.eleicao=e),this.subscriptions.add(this.modalService.showModalEmitter.pipe(Object(d.a)(e=>!e)).subscribe(e=>this.router.navigate(["/eleicoes"])))}ngAfterViewInit(){this.modalService.showModal(this.modalConfiguracao,"Configura\xe7\xf5es")}salvarConfiguracoes(){this.eleicoesApi.postConfiguracoes(this.eleicao.id,this.eleicao.configuracao).subscribe(e=>{this.toasts.showMessage({message:"Configura\xe7\xf5es atualizadas com sucesso!",title:"Sucesso!",type:s.a.success}),this.modalService.closeModal()})}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n["\u0275\u0275directiveInject"](g.a),n["\u0275\u0275directiveInject"](o.d),n["\u0275\u0275directiveInject"](o.a),n["\u0275\u0275directiveInject"](i.a),n["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=n["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var a;1&e&&n["\u0275\u0275viewQuery"](Pe,!0),2&e&&n["\u0275\u0275queryRefresh"](a=n["\u0275\u0275loadQuery"]())&&(t.modalConfiguracao=a.first)},decls:2,vars:0,consts:[["modalConfiguracao",""],["type","checkbox",3,"ngModel","ngModelChange"],[1,"mt-3","btn","btn-primary",3,"click"],[1,"fa","fa-floppy-o"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,De,14,3,"ng-template",null,0,n["\u0275\u0275templateRefExtractor"])},directives:[b.CheckboxControlValueAccessor,b.NgControlStatus,b.NgModel],styles:[""]}),e})();var qe=a("CF8v");const Re=[{path:"",component:te,data:{navigationType:ae.b.Top},children:[{path:":id/configuracao",component:_e,resolve:{eleicao:qe.a}}]},{path:"nova",component:Ge,data:{navigationType:ae.b.Top},canActivate:[Fe.a]},{path:":id",children:[{path:"dashboard",loadChildren:()=>Promise.all([a.e(0),a.e(6)]).then(a.bind(null,"+zCQ")).then(e=>e.DashboardModule),data:{breadcrumb:"Elei\xe7\xf5es",title:"Elei\xe7\xf5es"},canLoad:[ke.a]},{path:"cronograma",loadChildren:()=>Promise.all([a.e(0),a.e(9)]).then(a.bind(null,"NTsU")).then(e=>e.CronogramaModule),data:{breadcrumb:"Elei\xe7\xf5es",title:"Elei\xe7\xf5es"},canLoad:[ke.a]},{path:"eleitores",loadChildren:()=>Promise.all([a.e(0),a.e(10)]).then(a.bind(null,"dUjW")).then(e=>e.EleitoresModule),data:{breadcrumb:"Elei\xe7\xf5es",title:"Elei\xe7\xf5es"},canLoad:[ke.a]},{path:"inscricoes",loadChildren:()=>a.e(11).then(a.bind(null,"icyZ")).then(e=>e.InscricoesModule)},{path:"votacao",loadChildren:()=>a.e(12).then(a.bind(null,"T+Ks")).then(e=>e.VotacoesModule)}]}];let Te=(()=>{class e{}return e.\u0275mod=n["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=n["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.g.forChild(Re)],o.g]}),e})();var Be=a("PCNd");a.d(t,"EleicoesModule",(function(){return Ue}));let Ue=(()=>{class e{}return e.\u0275mod=n["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=n["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[Be.a,Te]]}),e})()},CF8v:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a("fXoL"),o=a("LRne"),i=a("JIr8"),r=a("GrLX"),s=a("tyNb");let l=(()=>{class e{constructor(e,t){this.api=e,this.router=t}resolve(e,t){if(e.paramMap.has("id")){const t=+e.paramMap.get("id");return this.api.get(t).pipe(Object(i.a)(e=>(this.router.navigate(["/not-found"]),Object(o.a)(null))))}this.router.navigate(["/not-found"])}}return e.\u0275fac=function(t){return new(t||e)(n["\u0275\u0275inject"](r.a),n["\u0275\u0275inject"](s.d))},e.\u0275prov=n["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},GrLX:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("fXoL"),o=a("tk/3"),i=a("ZE6C"),r=a("AytR"),s=a("RXgp"),l=a("L5lq"),c=a("b28D"),p=a("f7ew"),d=a("9HPz"),m=a("IzEk");let u=(()=>{class e extends i.a{constructor(e,t){super(e,r.a.api+s.a.eleicoes),this.http=e,this.arquivosApiService=t}postAtualizarDimensionamento(e){return this.http.post(`${this.url}${e}/atualizardimensionamento`,null).pipe(Object(m.a)(1))}getEleitores(e,t){const a=this.validParams(t);return this.http.get(`${this.url}${e}/eleitores`,{params:a}).pipe(Object(m.a)(1))}getEleitorUsuario(e){return this.http.get(`${this.url}${e}/eleitor`).pipe(Object(m.a)(1))}getEleitor(e,t){return this.http.get(`${this.url}${e}/eleitores/${t}`).pipe(Object(m.a)(1))}postEleitor(e,t){return this.http.post(`${this.url}${e}/eleitores`,t).pipe(Object(m.a)(1))}putEleitor(e,t,a){return this.http.put(`${this.url}${e}/eleitores/${t}`,a).pipe(Object(m.a)(1))}deleteEleitores(e){return this.http.delete(`${this.url}${e}/eleitores`).pipe(Object(m.a)(1))}deleteEleitor(e,t){return this.http.delete(`${this.url}${e}/eleitores/${t}`).pipe(Object(m.a)(1))}postConfiguracoes(e,t){return this.http.post(`${this.url}${e}/configuracoes`,t).pipe(Object(m.a)(1))}postInscricao(e,t){return this.http.post(`${this.url}${e}/inscricoes`,t).pipe(Object(m.a)(1))}putInscricao(e,t){return this.http.put(`${this.url}${e}/inscricoes`,t).pipe(Object(m.a)(1))}getInscricaoUsuario(e){return this.http.get(`${this.url}${e}/inscricao`).pipe(Object(m.a)(1))}getInscricoes(e,t,a="",n=null){const o={status:l.c[t],eleitorNome:a||""};return n&&(o.seedOrder=n),this.http.get(`${this.url}${e}/inscricoes`,{params:o}).pipe(Object(m.a)(1))}postFotoInscricao(e,t){return this.arquivosApiService.uploadFiles(`${this.url}${e}/inscricoes/foto`,t)}putAprovarInscricao(e,t){return this.http.put(`${this.url}${e}/inscricoes/${t}/aprovar`,null).pipe(Object(m.a)(1))}putReprovarInscricao(e,t,a){return this.http.put(`${this.url}${e}/inscricoes/${t}/reprovar`,a).pipe(Object(m.a)(1))}getCronograma(e){return this.http.get(`${this.url}${e}/cronograma`).pipe(Object(m.a)(1))}putAtualizaEtapaCronograma(e,t){return this.http.put(`${this.url}${e}/cronograma`,t).pipe(Object(m.a)(1))}postProximaEtapa(e){return this.http.post(`${this.url}${e}/proximaetapa`,null).pipe(Object(m.a)(1))}postImportacao(e,t){return this.arquivosApiService.uploadFiles(`${this.url}${e}/importacoes`,t).pipe(Object(p.a)(),Object(m.a)(1))}getUltimaImportacao(e){return this.http.get(`${this.url}${e}/importacoes/ultima`).pipe(Object(m.a)(1))}getInconsistencias(e,t){return this.http.get(`${this.url}${e}/importacoes/${t}/inconsistencias`).pipe(Object(m.a)(1))}postVotar(e,t){return this.http.post(`${this.url}${e}/inscricoes/${t}/votar`,null).pipe(Object(m.a)(1))}getVotos(e,t={}){const a=this.validParams(t);return this.http.get(`${this.url}${e}/votos`,{params:a}).pipe(Object(m.a)(1))}postVotoBranco(e){return this.http.post(`${this.url}${e}/votarbranco`,null).pipe(Object(m.a)(1))}getVotoEleitor(e,t){return this.http.get(`${this.url}${e}/voto`,{params:{eleitorId:t}}).pipe(Object(m.a)(1))}getVotoUsuario(e){return this.http.get(`${this.url}${e}/votousuario`).pipe(Object(m.a)(1))}getDimensionamento(e){return this.http.get(`${this.url}${e}/dimensionamento`).pipe(Object(m.a)(1))}getApuracao(e){return this.http.get(`${this.url}${e}/apuracao`).pipe(Object(m.a)(1))}postRegistrarResultado(e){return this.http.post(`${this.url}${e}/registrarresultado`,null).pipe(Object(m.a)(1))}getResultado(e){return this.http.get(`${this.url}${e}/resultado`).pipe(Object(m.a)(1))}downloadRelatorioVotos(e,t){return this.http.get(`${this.url}${e}/relatorios/votos`,{responseType:"arraybuffer"}).pipe(Object(d.a)("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t),Object(m.a)(1))}downloadRelatorioInscricoes(e,t){return this.http.get(`${this.url}${e}/relatorios/inscricoes`,{responseType:"arraybuffer"}).pipe(Object(d.a)("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t),Object(m.a)(1))}getArquivos(e,t){return this.http.get(`${this.url}${e}/cronograma/${t}/arquivos`).pipe(Object(m.a)(1))}uploadArquivos(e,t,a){const n=new FormData;for(let o=0;o<a.length;o++)n.append("file"+o,a[o]);const i=new o.f("POST",`${this.url}${e}/cronograma/${t}/arquivos`,n);return this.http.request(i)}}return e.\u0275fac=function(t){return new(t||e)(n["\u0275\u0275inject"](o.b),n["\u0275\u0275inject"](c.a))},e.\u0275prov=n["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},LOG3:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("fXoL"),o=a("7dP1"),i=a("iufN"),r=a("dWir"),s=a("gbzl"),l=a("tyNb");let c=(()=>{class e{constructor(e,t,a){this.authService=e,this.router=t,this.toast=a}canActivate(){return!(!this.authService.tokenValido||this.authService.authInfo.perfil!==i.a.SESMT&&this.authService.authInfo.perfil!==i.a.Administrador)||(this.toast.showMessage({message:"Usu\xe1rio sem permiss\xe3o de acesso",title:"Sem permiss\xe3o",type:s.a.warning}),this.router.navigate(["/eleicoes"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(n["\u0275\u0275inject"](o.a),n["\u0275\u0275inject"](l.d),n["\u0275\u0275inject"](r.a))},e.\u0275prov=n["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},ZELa:function(e,t,a){},f7ew:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("mCNh"),o=a("pLZG"),i=a("lJxs"),r=(a("vkgz"),a("tk/3"));function s(){return Object(n.a)(Object(o.a)(e=>e.type===r.e.Response),Object(i.a)(e=>e.body))}}}]);